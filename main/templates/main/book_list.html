{% extends 'main/base.html' %}

{% block title %}–ö–Ω–∏–≥–∏ - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞{% endblock %}

{% block content %}
<h2>üìñ –ö–∞—Ç–∞–ª–æ–≥ –∫–Ω–∏–≥</h2>

<div class="filters">
    <form method="get">
        <input type="text" name="search" placeholder="–ü–æ–∏—Å–∫ –∫–Ω–∏–≥..." value="{{ search_query }}">
        <select name="genre">
            <option value="">–í—Å–µ –∂–∞–Ω—Ä—ã</option>
            {% for genre in genres %}
            <option value="{{ genre.id_genre }}" {% if selected_genre == genre.id_genre|stringformat:"i" %}selected{% endif %}>
                {{ genre.name_genre }}
            </option>
            {% endfor %}
        </select>
        <button type="submit">üîç –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
    </form>
</div>

{% for book in books %}
<div class="book">
    <h3><a href="{% url 'book_detail' book.id_book %}">{{ book.title }}</a></h3>
    <p><strong>–ê–≤—Ç–æ—Ä:</strong> <a href="{% url 'author_detail' book.id_author.id_author %}">{{ book.id_author.first_name }} {{ book.id_author.last_name }}</a></p>
    <p><strong>–ì–æ–¥:</strong> {{ book.year }} | <strong>–ñ–∞–Ω—Ä:</strong> {{ book.id_genre.name_genre }}</p>
    <p><strong>–°—Ç—Ä–∞–Ω–∏—Ü:</strong> {{ book.pages }} | <strong>–†–µ–π—Ç–∏–Ω–≥:</strong> {{ book.age_rating }}</p>
</div>
{% empty %}
<p>–ö–Ω–∏–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.</p>
{% endfor %}
{% endblock %}