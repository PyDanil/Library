{% extends 'main/base.html' %}

{% block title %}{{ author.first_name }} {{ author.last_name }} - SysLibrary{% endblock %}

{% block content %}
<a href="{% url 'author_list' %}" class="back-btn">
    ‚Üê –ù–∞–∑–∞–¥ –∫ –∞–≤—Ç–æ—Ä–∞–º
</a>

<div style="background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
    <!-- –•–µ–¥–µ—Ä –∞–≤—Ç–æ—Ä–∞ -->
    <div style="background: linear-gradient(135deg, #4f46e5, #7c3aed); color: white; padding: 3rem;">
        <div style="display: grid; grid-template-columns: auto 1fr; gap: 2rem; align-items: center;">
            {% if author.photo %}
            <img src="{{ author.photo.url }}" alt="{{ author.first_name }} {{ author.last_name }}" 
                 style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 4px solid white;">
            {% else %}
            <div style="width: 150px; height: 150px; border-radius: 50%; background: rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; border: 4px solid white;">
                <span style="font-size: 3rem;">üë§</span>
            </div>
            {% endif %}
            <div>
                <h1 style="font-size: 2.5rem; font-weight: 700; margin-bottom: 0.5rem;">{{ author.first_name }} {{ author.last_name }}</h1>
                <p style="font-size: 1.2rem; opacity: 0.9;">{{ author.country }}</p>
                <p style="margin-top: 1rem; opacity: 0.8;">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: {{ author.birthday|date:"d.m.Y" }}</p>
            </div>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
    <div style="padding: 2rem;">
        {% if author.description %}
        <div style="margin-bottom: 2rem;">
            <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1rem; color: #2d3748;">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</h2>
            <p style="color: #4a5568; line-height: 1.8; font-size: 1.1rem;">{{ author.description|linebreaks }}</p>
        </div>
        {% endif %}

        <!-- –ö–Ω–∏–≥–∏ –∞–≤—Ç–æ—Ä–∞ -->
        <div>
            <h2 style="font-size: 1.5rem; font-weight: 600; margin-bottom: 1.5rem; color: #2d3748;">–ö–Ω–∏–≥–∏ –∞–≤—Ç–æ—Ä–∞</h2>
            <div style="display: flex; flex-direction: column; gap: 1rem;">
                {% for book in books %}
                <div style="display: flex; gap: 1.5rem; padding: 1.5rem; background: #f8fafc; border-radius: 12px; border-left: 4px solid #4f46e5;">
                    {% if book.cover_image %}
                    <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" 
                         style="width: 80px; height: 100px; object-fit: cover; border-radius: 6px;">
                    {% else %}
                    <div style="width: 80px; height: 100px; background: #e2e8f0; border-radius: 6px; display: flex; align-items: center; justify-content: center; color: #9ca3af;">
                        üìñ
                    </div>
                    {% endif %}
                    <div style="flex: 1;">
                        <h3 style="font-size: 1.2rem; font-weight: 600; margin-bottom: 0.5rem; color: #2d3748;">
                            <a href="{% url 'book_detail' book.id_book %}" style="color: inherit; text-decoration: none;">{{ book.title }}</a>
                        </h3>
                        <div style="display: flex; gap: 2rem; color: #6b7280; font-size: 0.9rem; margin-bottom: 0.5rem;">
                            <span>–ì–æ–¥: {{ book.year }}</span>
                            <span>–ñ–∞–Ω—Ä: {{ book.id_genre.name_genre }}</span>
                            <span>–°—Ç—Ä–∞–Ω–∏—Ü: {{ book.pages }}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="background: #10b981; color: white; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem; font-weight: 600;">
                                {{ book.age_rating }}
                            </span>
                            <a href="{% url 'book_read' book.id_book %}" style="background: #4f46e5; color: white; padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none; font-weight: 500; font-size: 0.9rem;">
                                –ß–∏—Ç–∞—Ç—å
                            </a>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div style="text-align: center; padding: 2rem; color: #6b7280;">
                    <p>–ö–Ω–∏–≥–∏ —ç—Ç–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}